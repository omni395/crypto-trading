# Crypto Trading Platform

## Описание

Веб-приложение для мониторинга и анализа криптовалютных инструментов с поддержкой фильтрации, избранного, realtime-обновлений и кастомных пользовательских настроек. Поддерживает работу как для авторизованных, так и для неавторизованных пользователей.

## Технологии

- **Ruby on Rails** — основной backend и API
- **Hotwire (Turbo/Stimulus)** — динамика и realtime UI
- **TailwindCSS/Flowbite** — стилизация интерфейса
- **PostgreSQL** — база данных
- **Redis** — кеш и pub/sub
- **Sidekiq** — фоновые задачи
- **Docker Compose** — контейнеризация и масштабирование
- **Vite** — сборка фронтенда (JS, CSS, HMR)

## Функционал

- Загрузка и обновление списка торговых пар с Binance (spot/futures)
- Инкрементальное обновление монет: добавление новых, обновление изменённых, деактивация исчезнувших
- Быстрый live-поиск по монетам
- Пользовательские фильтры и настройки (котируемая валюта, статус, биржа и др.)
- Сохранение фильтров через API, автоматическое обновление списка монет
- Для неавторизованных пользователей — дефолтные фильтры
- Отображение актуальных данных и графиков по инструментам
- Realtime-обновление графиков через WebSocket
- Авторизация через Google (omniauth)
- Модульные компоненты на Hotwire/Stimulus
- Docker-окружение для разработки и деплоя
- Уведомления через Toastr и jQuery
- Избранные монеты (TODO)

## Структура проекта

- `app/frontend` — фронтенд-код (Stimulus, JS, CSS, entrypoints для Vite)
- `app/assets/builds` — production-ассеты
- `pg-data`, `redis-data`, `bundle`, `node_modules` — временные данные и зависимости

## Логика работы приложения

1. При открытии страницы загружается список монет по фильтрам пользователя (или дефолтным).
2. Пользователь может открыть модалку настроек, изменить фильтры и сохранить новые значения.
3. После сохранения настроек список монет автоматически обновляется.
4. Избранные монеты (TODO) не фильтруются и будут отображаться отдельным списком.

## Логика пользовательских фильтров

- Все фильтры (объём, сделки, изменение, цена и др.) хранятся в поле `settings` пользователя
- Для неавторизованных — дефолтные значения
- При открытии страницы/модалки настройки подставляются из базы (или дефолтные)
- После сохранения — новые значения используются для фильтрации монет
- Фильтрация по бирже, статусу, валюте и др. динамическая

## Архитектура контроллеров

### Backend (Ruby on Rails)
- **MainController** — формирует главную страницу, фильтры, список монет, live search
- **Api::InstrumentsController**
  - `index` — отфильтрованный список монет
  - `favorites` — избранные монеты (если реализовано)
- **Api::UserSettingsController**
  - `show` — текущие настройки пользователя
  - `update` — сохранение новых настроек
- **Users::OmniauthCallbacksController** — авторизация через Google

## Важно

- Поле `market_type` полностью удалено, фильтрация только по `exchange`, статусу и валюте
- Все фильтры и настройки динамические, live search работает без перезагрузки
- Для авторизованных сохраняются избранные монеты и настройки

## Отображение иконок криптовалют

- Основной CDN: [binance-icons](https://github.com/VadimMalykhin/binance-icons) через CDN:
  `https://cdn.jsdelivr.net/gh/vadimmalykhin/binance-icons/crypto/[base_asset].svg`
- Fallback: https://cryptoicons.org/api/icon/[base_asset]/32
- Если иконка не найдена — серая иконка FontAwesome (`fa-circle-question`)
- Для корректной работы FontAwesome подключите CDN:
  `<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">`

## TODO
- Избранные монеты: отдельный список, не фильтруются, localStorage/профиль
- Drag-and-drop сортировка монет

---

_Для подробностей см. комментарии в исходных файлах и описание компонентов._
